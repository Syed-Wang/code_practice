# 华为机试题目 02

请你详细地解释一下 IP 协议的定义，在哪个层上面？主要有什么作用？TCP 与 UDP 呢 ？

答：IP 协议是 TCP/IP 协议族中的一个协议，位于网络层，**主要作用是实现网络互连**，将数据包从源地址传送到目的地址。
TCP/UDP 协议位于传输层，**主要作用是实现端到端的通信**，TCP 是面向连接的，UDP 是面向无连接的。
面向连接是指在数据传输前需要先建立连接，传输完成后再释放连接，而面向无连接是指数据传输前不需要建立连接，直接传输数据。

三次握手和四次挥手的过程是什么样的？为什么要这样设计？

答：三次握手的过程是这样的：

1. 客户端向服务器发送一个 SYN 报文，其中包含一个随机产生的序列号 seq=x，此时客户端处于 SYN_SEND 状态。
2. 服务器收到 SYN 报文后，向客户端发送一个 SYN 报文，其中包含一个随机产生的序列号 seq=y，同时也将确认序号 ack=x+1，此时服务器处于 SYN_RECV 状态。
3. 客户端收到服务器的 SYN 报文后，向服务器发送一个 ACK 报文，其中包含确认序号 ack=y+1，此时客户端处于 ESTABLISHED 状态。

四次挥手的过程是这样的：

1. 客户端向服务器发送一个 FIN 报文，其中包含一个随机产生的序列号 seq=u，此时客户端处于 FIN_WAIT_1 状态。
2. 服务器收到 FIN 报文后，向客户端发送一个 ACK 报文，其中包含确认序号 ack=u+1，此时服务器处于 CLOSE_WAIT 状态。
3. 服务器向客户端发送一个 FIN 报文，其中包含一个随机产生的序列号 seq=v，此时服务器处于 LAST_ACK 状态。
4. 客户端收到 FIN 报文后，向服务器发送一个 ACK 报文，其中包含确认序号 ack=v+1，此时客户端处于 TIME_WAIT 状态。

为什么要这样设计呢？因为 TCP 是面向连接的，需要先建立连接，传输完成后再释放连接，所以需要三次握手建立连接，四次挥手释放连接。
